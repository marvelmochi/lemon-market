<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lemon Market</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/reset.css" />

    <!-- Ïõπ Ìè∞Ìä∏ -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Alumni+Sans+Pinstripe&family=Anton&family=Noto+Sans+KR:wght@500&family=Roboto:wght@500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="wrap">
      <!-- Ìó§Îçî -->
      <div id="header">
        <div id="logo">üçã</div>
        <div id="title">LEMON MARKET</div>
        <button id="menu-button">‚ò∞</button>
      </div>
      <!-- //Ìó§Îçî -->
      <!-- Î°úÍ∑∏Ïù∏ -->
      <div id="login" class="hidden">
        <div id="login-title">LEMON MARKET LOGIN</div>
        <form id="login-form">
          <div>
            <input required id="id-input" placeholder="ID" autocomplete="off" />
          </div>
          <div>
            <input
              required
              id="password-input"
              type="password"
              placeholder="PASSWORD"
              autocomplete="off"
            />
          </div>
          <div id="login-btn-container">
            <button id="login-btn">LOGIN</button>
            <button id="sign-btn">SIGN UP</button>
          </div>
        </form>
      </div>
      <!-- //Î°úÍ∑∏Ïù∏ -->
      <!-- ÏúÑÏπò -->
      <div id="location">
        <div id="town"></div>
        <button id="location-btn">üîÑ</button>
      </div>
      <div id="map"></div>
      <!-- //ÏúÑÏπò-->
      <!-- Î©îÏù∏ -->
      <!-- //Î©îÏù∏ -->
    </div>
    <script type="text/javascript" , src="./js/apiKey.js"></script>
    <script type="module" , src="./js/elements.js"></script>
    <script type="module" , src="./js/utils.js"></script>
    <script type="module" , src="./js/signUp.js"></script>
    <script type="module" , src="./js/login.js"></script>
    <script type="module" , src="./js/location.js"></script>
    <script id="script"></script>
    <!--<script>
      const APP_KEY = config.KAKAO_API_KEY;
      const API_SRC = `//dapi.kakao.com/v2/maps/sdk.js?appkey=${APP_KEY}`;
      console.log(API_SRC);
      document.getElementById("script").src = API_SRC;
    </script>-->

    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ec5f9dfa66a3a6eb6a6850d5f29e1b6d&libraries=services"
    ></script>
    <script>
      const town = document.getElementById("town");
      let mapContainer = document.getElementById("map"),
        mapOption = {
          center: new kakao.maps.LatLng(33.450701, 126.570667),
          level: 5,
        };

      const map = new kakao.maps.Map(mapContainer, mapOption);
      const geocoder = new kakao.maps.services.Geocoder();
      searchAddrFromCoords(map.getCenter(), displayCenterInfo);

      function searchAddrFromCoords(coords, callback) {
        geocoder.coord2RegionCode(coords.getLng(), coords.getLat(), callback);
      }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
          let lat = position.coords.latitude,
            lon = position.coords.longitude;

          const locPosition = new kakao.maps.LatLng(lat, lon);

          displayMarker(locPosition);
        });
      } else {
      }
      function displayMarker(locPosition) {
        const marker = new kakao.maps.Marker({
          map: map,
          position: locPosition,
        });

        map.setCenter(locPosition);
      }
      function displayCenterInfo(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          for (let i = 0; i < result.length; i++) {
            if (result[i].region_type === "H") {
              town.innerHTML = result[i].address_name;
              break;
            }
          }
        }
      }
    </script>
  </body>
</html>
